<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Froggy Quest Builder</title>
<style>
:root {
    --bg: #0f172a;
    --panel: #1e293b;
    --accent: #22c55e;
    --accent-hover: #16a34a;
    --text: #f1f5f9;
    --border: #334155;
    --input-bg: #0f172a;
    --danger: #ef4444;
    --blue: #3b82f6;
    --purple: #8b5cf6;
}

* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    background: var(--bg);
    color: var(--text);
    overflow: hidden;
    display: flex;
    height: 100vh;
}

/* SIDEBAR */
#sidebar {
    width: 480px;
    min-width: 480px;
    background: var(--panel);
    padding: 16px;
    overflow-y: auto;
    border-right: 2px solid var(--border);
    display: flex;
    flex-direction: column;
    gap: 12px;
}

#sidebar::-webkit-scrollbar { width: 6px; }
#sidebar::-webkit-scrollbar-track { background: var(--bg); }
#sidebar::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

.group {
    background: var(--bg);
    padding: 14px;
    border-radius: 10px;
    border: 1px solid var(--border);
}

.group-title {
    font-size: 10px;
    color: var(--accent);
    text-transform: uppercase;
    font-weight: 700;
    letter-spacing: 1px;
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 6px;
}

label {
    display: block;
    font-size: 11px;
    margin: 10px 0 4px;
    color: #94a3b8;
    font-weight: 500;
}

input[type="text"], input[type="number"], select, textarea {
    width: 100%;
    padding: 9px 11px;
    background: var(--panel);
    border: 1px solid var(--border);
    color: #fff;
    border-radius: 7px;
    font-size: 13px;
    transition: border-color 0.2s;
    font-family: inherit;
}

input:focus, select:focus, textarea:focus {
    outline: none;
    border-color: var(--accent);
}

input[type="color"] {
    height: 40px;
    cursor: pointer;
    padding: 3px;
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 7px;
}

/* FILE INPUT ‚Äî –∫—Ä–∞—Å–∏–≤—ã–π */
.file-upload-wrap {
    position: relative;
    margin: 4px 0 0;
}

.file-upload-wrap input[type="file"] {
    position: absolute;
    opacity: 0;
    width: 100%;
    height: 100%;
    cursor: pointer;
    top: 0; left: 0;
}

.file-upload-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: var(--panel);
    border: 1px dashed var(--border);
    border-radius: 7px;
    font-size: 12px;
    color: #94a3b8;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
}

.file-upload-btn:hover {
    border-color: var(--accent);
    color: var(--accent);
}

.file-upload-btn.has-file {
    border-color: var(--accent);
    border-style: solid;
    color: var(--accent);
    background: rgba(34,197,94,0.08);
}

.file-thumb {
    width: 28px;
    height: 28px;
    object-fit: contain;
    border-radius: 4px;
    display: none;
    background: #000;
    border: 1px solid var(--border);
    flex-shrink: 0;
}

.file-clear {
    margin-left: auto;
    background: none;
    border: none;
    color: var(--danger);
    cursor: pointer;
    font-size: 14px;
    padding: 2px 4px;
    display: none;
    line-height: 1;
}

.file-upload-btn.has-file .file-clear { display: block; }
.file-upload-btn.has-file .file-thumb { display: block; }

.size-badge {
    font-size: 9px;
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 1px 5px;
    color: #64748b;
    margin-left: auto;
}

.size-badge.warn { color: #f59e0b; border-color: #f59e0b; }
.size-badge.danger { color: var(--danger); border-color: var(--danger); }

.checkbox-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 8px 0;
}

input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--accent);
}

.color-picker-row {
    display: grid;
    grid-template-columns: 48px 1fr;
    gap: 8px;
    align-items: center;
}

.slider-container {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 4px;
}

input[type="range"] {
    flex: 1;
    accent-color: var(--accent);
    cursor: pointer;
}

.slider-value {
    min-width: 40px;
    text-align: right;
    font-size: 12px;
    font-weight: 700;
    color: var(--accent);
}

.hint {
    font-size: 10px;
    color: #64748b;
    margin-top: 5px;
    line-height: 1.4;
}

.warn-note {
    background: rgba(245,158,11,0.1);
    border: 1px solid rgba(245,158,11,0.3);
    border-radius: 7px;
    padding: 8px 10px;
    font-size: 11px;
    color: #f59e0b;
    line-height: 1.5;
    margin-bottom: 8px;
}

/* –ö–ù–û–ü–ö–ò */
.btn {
    width: 100%;
    padding: 12px 16px;
    border: none;
    border-radius: 9px;
    font-weight: 700;
    cursor: pointer;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: all 0.2s;
    font-family: inherit;
}

.btn-green { background: var(--accent); color: #052e16; }
.btn-green:hover { background: var(--accent-hover); transform: translateY(-1px); box-shadow: 0 4px 12px rgba(34,197,94,0.3); }

.btn-blue { background: var(--blue); color: white; }
.btn-blue:hover { background: #2563eb; transform: translateY(-1px); }

.btn-purple { background: var(--purple); color: white; }
.btn-purple:hover { background: #7c3aed; transform: translateY(-1px); }

.btn-danger-sm {
    background: rgba(239,68,68,0.15);
    border: 1px solid rgba(239,68,68,0.3);
    color: var(--danger);
    padding: 5px 9px;
    font-size: 11px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 700;
    font-family: inherit;
    transition: background 0.2s;
}
.btn-danger-sm:hover { background: rgba(239,68,68,0.25); }

/* –í–û–ü–†–û–°–´ */
.question-item {
    background: var(--panel);
    padding: 12px;
    border-radius: 9px;
    margin-bottom: 10px;
    border: 1px solid var(--border);
}

.question-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.question-number {
    font-size: 11px;
    font-weight: 700;
    color: var(--accent);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.option-grid { display: grid; gap: 6px; margin-top: 6px; }

.option-row {
    display: grid;
    grid-template-columns: 20px 1fr 22px;
    gap: 8px;
    align-items: center;
}

.option-row input[type="radio"] {
    width: 16px;
    height: 16px;
    cursor: pointer;
    accent-color: var(--accent);
}

.option-row input[type="text"] { margin: 0; font-size: 12px; padding: 7px 10px; }

.opt-letter {
    font-size: 11px;
    font-weight: 700;
    color: var(--accent);
    text-align: center;
}

/* LEVELS */
.levels-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin: 8px 0;
}

.level-tab {
    padding: 7px 14px;
    background: var(--panel);
    border: 2px solid var(--border);
    border-radius: 7px;
    text-align: center;
    cursor: pointer;
    font-size: 11px;
    font-weight: 700;
    transition: all 0.2s;
    color: var(--text);
}

.level-tab.active {
    background: var(--accent);
    color: #052e16;
    border-color: var(--accent);
}

/* PREVIEW */
#preview-area {
    flex: 1;
    background: #000;
    display: flex;
    flex-direction: column;
}

#preview-header {
    background: var(--panel);
    padding: 12px 18px;
    border-bottom: 2px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
}

#preview-header h3 { margin: 0; font-size: 13px; color: var(--text); }

#preview-header .size-info {
    font-size: 11px;
    font-weight: 700;
}

.size-ok { color: var(--accent); }
.size-warn { color: #f59e0b; }
.size-bad { color: var(--danger); }

iframe {
    flex: 1;
    border: none;
    background: #000;
}

/* QUESTIONS TEXTAREA */
textarea#questions-input {
    font-family: 'Courier New', monospace;
    font-size: 12px;
    line-height: 1.6;
    resize: vertical;
}

.audio-grid { display: grid; gap: 8px; }

.audio-item {
    display: grid;
    grid-template-columns: 110px 1fr;
    gap: 8px;
    align-items: center;
}

.audio-label { font-size: 11px; color: #94a3b8; }

/* STATUS BAR */
#status-bar {
    background: var(--input-bg);
    border-top: 1px solid var(--border);
    padding: 8px 16px;
    display: flex;
    gap: 8px;
    align-items: center;
    flex-shrink: 0;
}

#status-text { font-size: 11px; color: #64748b; flex: 1; }

/* COMPRESSION SETTINGS */
.compress-options {
    background: rgba(34,197,94,0.06);
    border: 1px solid rgba(34,197,94,0.2);
    border-radius: 8px;
    padding: 10px;
    margin-top: 8px;
}

.compress-options label {
    color: var(--accent);
    margin-top: 0;
}

.two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
</style>
</head>
<body>

<div id="sidebar">

    <!-- –°–ñ–ê–¢–ò–ï ‚Äî —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ! -->
    <div class="group">
        <div class="group-title">‚ö° –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∂–∞—Ç–∏—è –¥–ª—è Genially</div>
        <div class="warn-note">
            –ö–∞—Ä—Ç–∏–Ω–∫–∏ –∏ –∞—É–¥–∏–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ base64 –¥–µ–ª–∞—é—Ç –∫–æ–¥ –æ—á–µ–Ω—å —Ç—è–∂—ë–ª—ã–º. –°–∂–∞—Ç–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –≤ 5‚Äì20 —Ä–∞–∑.
        </div>
        <div class="compress-options">
            <label>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫–∞—Ä—Ç–∏–Ω–∫–∏ (px)</label>
            <div class="slider-container">
                <input type="range" id="img-max-size" min="100" max="800" value="300" step="50" oninput="sliderVal(this,'img-max-size-val')">
                <span class="slider-value" id="img-max-size-val">300</span>
            </div>
            <p class="hint">–ú–µ–Ω—å—à–µ = –ª–µ–≥—á–µ –∫–æ–¥. 300px –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∏–≥—Ä—ã.</p>

            <label>–ö–∞—á–µ—Å—Ç–≤–æ JPEG/WebP (1‚Äì100)</label>
            <div class="slider-container">
                <input type="range" id="img-quality" min="20" max="95" value="70" oninput="sliderVal(this,'img-quality-val')">
                <span class="slider-value" id="img-quality-val">70</span>
            </div>
            <p class="hint">70 = —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å –∫–∞—á–µ—Å—Ç–≤–æ/—Ä–∞–∑–º–µ—Ä.</p>
            <p class="hint" style="color:#22d3ee; margin-top:6px;">‚ö° –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–ª–∞–π–¥–µ—Ä–æ–≤ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ø–µ—Ä–µ—Å–∂–∏–º–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</p>
        </div>

        <div id="total-size-display" style="margin-top:10px; font-size:12px; color:#64748b; text-align:center;">
            –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –∫–æ–¥–∞: <strong id="total-size-val">‚Äî</strong>
        </div>
    </div>

    <!-- 1. –û–ë–©–ò–ï –ù–ê–°–¢–†–û–ô–ö–ò -->
    <div class="group">
        <div class="group-title">1. –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</div>
        <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã</label>
        <input type="text" id="game-title" value="PAST SIMPLE CHALLENGE">
        <label>–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç</label>
        <textarea id="welcome-text" rows="2">–ì–æ—Ç–æ–≤—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è?</textarea>
        <div class="checkbox-row">
            <input type="checkbox" id="enable-countdown" checked>
            <label style="margin:0;">–û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á—ë—Ç 3-2-1-GO</label>
        </div>
    </div>

    <!-- 2. –ì–†–ê–§–ò–ö–ê -->
    <div class="group">
        <div class="group-title">2. –ì—Ä–∞—Ñ–∏–∫–∞</div>

        <label>–ü–µ—Ä—Å–æ–Ω–∞–∂ (–ª—è–≥—É—à–∫–∞/–≥–µ—Ä–æ–π)</label>
        <div class="file-upload-wrap">
            <div class="file-upload-btn" id="btn-hero">
                <img class="file-thumb" id="thumb-hero">
                <span class="file-name">üìÇ –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª...</span>
                <span class="size-badge" id="sz-hero"></span>
                <button class="file-clear" onclick="clearFile('hero', event)">‚úï</button>
            </div>
            <input type="file" id="img-hero" accept="image/*" onchange="loadImage('hero', this)">
        </div>

        <label>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ (–ª–∏—Å—Ç/–∞—Å—Ç–µ—Ä–æ–∏–¥)</label>
        <div class="file-upload-wrap">
            <div class="file-upload-btn" id="btn-platform">
                <img class="file-thumb" id="thumb-platform">
                <span class="file-name">üìÇ –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª...</span>
                <span class="size-badge" id="sz-platform"></span>
                <button class="file-clear" onclick="clearFile('platform', event)">‚úï</button>
            </div>
            <input type="file" id="img-platform" accept="image/*" onchange="loadImage('platform', this)">
        </div>

        <label>–§–æ–Ω –∏–≥—Ä—ã</label>
        <div class="file-upload-wrap">
            <div class="file-upload-btn" id="btn-bg">
                <img class="file-thumb" id="thumb-bg">
                <span class="file-name">üìÇ –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª...</span>
                <span class="size-badge" id="sz-bg"></span>
                <button class="file-clear" onclick="clearFile('bg', event)">‚úï</button>
            </div>
            <input type="file" id="img-bg" accept="image/*" onchange="loadImage('bg', this)">
        </div>

        <label>–ò–∫–æ–Ω–∫–∞ –∂–∏–∑–Ω–∏</label>
        <div class="file-upload-wrap">
            <div class="file-upload-btn" id="btn-life">
                <img class="file-thumb" id="thumb-life">
                <span class="file-name">üìÇ –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª...</span>
                <span class="size-badge" id="sz-life"></span>
                <button class="file-clear" onclick="clearFile('life', event)">‚úï</button>
            </div>
            <input type="file" id="img-life" accept="image/*" onchange="loadImage('life', this)">
        </div>

        <label>–ü–µ—Ä—Å–æ–Ω–∞–∂ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–±–µ–¥—ã (—Ä–∞–¥–æ—Å—Ç–Ω—ã–π)</label>
        <div class="file-upload-wrap">
            <div class="file-upload-btn" id="btn-victory-hero">
                <img class="file-thumb" id="thumb-victory-hero">
                <span class="file-name">üìÇ –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª...</span>
                <span class="size-badge" id="sz-victory-hero"></span>
                <button class="file-clear" onclick="clearFile('victory-hero', event)">‚úï</button>
            </div>
            <input type="file" id="img-victory-hero" accept="image/*" onchange="loadImage('victory-hero', this)">
        </div>
    </div>

    <!-- 3. –¶–í–ï–¢–ê -->
    <div class="group">
        <div class="group-title">3. –¶–≤–µ—Ç–∞ –∏ —Å—Ç–∏–ª—å</div>

        <label>–¶–≤–µ—Ç —Ä–∞–º–∫–∏ –≤–æ–ø—Ä–æ—Å–∞</label>
        <div class="color-picker-row">
            <input type="color" id="color-question-border" value="#6ab04c" oninput="syncHex(this,'color-question-border-hex')">
            <input type="text" id="color-question-border-hex" value="#6ab04c" maxlength="7" oninput="syncColor(this,'color-question-border')">
        </div>

        <label>–¶–≤–µ—Ç –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</label>
        <div class="color-picker-row">
            <input type="color" id="color-glow" value="#ffffff" oninput="syncHex(this,'color-glow-hex')">
            <input type="text" id="color-glow-hex" value="#ffffff" maxlength="7" oninput="syncColor(this,'color-glow')">
        </div>

        <label>–¶–≤–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞</label>
        <div class="color-picker-row">
            <input type="color" id="color-timer" value="#eb4d4b" oninput="syncHex(this,'color-timer-hex')">
            <input type="text" id="color-timer-hex" value="#eb4d4b" maxlength="7" oninput="syncColor(this,'color-timer')">
        </div>

        <label>–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞</label>
        <div class="color-picker-row">
            <input type="color" id="color-text" value="#ffffff" oninput="syncHex(this,'color-text-hex')">
            <input type="text" id="color-text-hex" value="#ffffff" maxlength="7" oninput="syncColor(this,'color-text')">
        </div>

        <label>–†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ –æ—Ç–≤–µ—Ç–æ–≤ (px)</label>
        <div class="slider-container">
            <input type="range" id="answer-font-size" min="12" max="32" value="22" oninput="sliderVal(this,'answer-font-value')">
            <span class="slider-value" id="answer-font-value">22</span>
        </div>

        <label>–†–∞–∑–º–µ—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (%)</label>
        <div class="slider-container">
            <input type="range" id="hero-size" min="40" max="160" value="100" oninput="sliderVal(this,'hero-size-value')">
            <span class="slider-value" id="hero-size-value">100</span>
        </div>

        <label>–ü–æ–∑–∏—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ (%)</label>
        <div class="slider-container">
            <input type="range" id="hero-vertical" min="0" max="100" value="70" oninput="sliderVal(this,'hero-vertical-value')">
            <span class="slider-value" id="hero-vertical-value">70</span>
        </div>
        <p class="hint">0 = –≤—ã—Å–æ–∫–æ –Ω–∞–¥ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π, 100 = –≥–ª—É–±–æ–∫–æ –≤–Ω—É—Ç—Ä–∏</p>
    </div>

    <!-- 4. –ò–ì–†–û–í–´–ï –ü–ê–†–ê–ú–ï–¢–†–´ -->
    <div class="group">
        <div class="group-title">4. –ò–≥—Ä–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</div>

        <label>–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</label>
        <select id="game-language">
            <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
            <option value="en">üá¨üáß English</option>
            <option value="de">üá©üá™ Deutsch</option>
        </select>

        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–∏–∑–Ω–µ–π</label>
        <div class="slider-container">
            <input type="range" id="lives-count" min="1" max="10" value="5" oninput="sliderVal(this,'lives-value')">
            <span class="slider-value" id="lives-value">5</span>
        </div>

        <div class="checkbox-row">
            <input type="checkbox" id="enable-timer" checked>
            <label style="margin:0;">–í–∫–ª—é—á–∏—Ç—å —Ç–∞–π–º–µ—Ä</label>
        </div>

        <label>–í—Ä–µ–º—è –Ω–∞ –æ—Ç–≤–µ—Ç (—Å–µ–∫)</label>
        <div class="slider-container">
            <input type="range" id="timer-duration" min="5" max="60" value="15" step="5" oninput="sliderVal(this,'timer-value')">
            <span class="slider-value" id="timer-value">15</span>
        </div>

        <div class="two-col">
            <div>
                <label>–ö–Ω–æ–ø–∫–∞ –°—Ç–∞—Ä—Ç</label>
                <input type="text" id="start-button-text" value="–°–¢–ê–†–¢!">
            </div>
            <div>
                <label>–ö–Ω–æ–ø–∫–∞ –ï—â—ë —Ä–∞–∑</label>
                <input type="text" id="retry-button-text" value="–ï—â—ë —Ä–∞–∑">
            </div>
        </div>

        <div class="two-col">
            <div>
                <label>–¢–µ–∫—Å—Ç –ø–æ–±–µ–¥—ã</label>
                <input type="text" id="victory-text" value="–ü–û–ë–ï–î–ê! üéâ">
            </div>
            <div>
                <label>–¢–µ–∫—Å—Ç –ø–æ—Ä–∞–∂–µ–Ω–∏—è</label>
                <input type="text" id="gameover-text" value="–ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê üò¢">
            </div>
        </div>

        <label>–°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–±–µ–¥—ã (–ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫)</label>
        <textarea id="victory-message" rows="2">–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! –¢—ã —Å–ø—Ä–∞–≤–∏–ª—Å—è!</textarea>

        <label>–í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –ø–æ–±–µ–¥—ã</label>
        <select id="victory-effect" onchange="toggleCustomEffect()">
            <option value="fireworks">üéÜ –°–∞–ª—é—Ç</option>
            <option value="confetti">üéä –ö–æ–Ω—Ñ–µ—Ç—Ç–∏</option>
            <option value="stars">‚≠ê –ó–≤—ë–∑–¥—ã</option>
            <option value="hearts">üíñ –°–µ—Ä–¥–µ—á–∫–∏</option>
            <option value="sparkles">‚ú® –ò—Å–∫—Ä—ã</option>
            <option value="bubbles">ü´ß –ü—É–∑—ã—Ä–∏</option>
            <option value="rainbow">üåà –†–∞–¥—É–≥–∞</option>
            <option value="gold">üí∞ –ó–æ–ª–æ—Ç–æ</option>
            <option value="diamonds">üíé –ê–ª–º–∞–∑—ã</option>
            <option value="snow">‚ùÑÔ∏è –°–Ω–µ–≥</option>
            <option value="flowers">üå∏ –¶–≤–µ—Ç—ã</option>
            <option value="sunshine">‚òÄÔ∏è –°–æ–ª–Ω—Ü–µ</option>
            <option value="magic">üîÆ –ú–∞–≥–∏—è</option>
            <option value="custom">üñºÔ∏è –°–≤–æ—è –∫–∞—Ä—Ç–∏–Ω–∫–∞</option>
            <option value="none">‚Äî –ë–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤</option>
        </select>

        <div id="custom-effect-settings" style="display:none; margin-top:8px;">
            <label>–ö–∞—Ä—Ç–∏–Ω–∫–∞ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞</label>
            <div class="file-upload-wrap">
                <div class="file-upload-btn" id="btn-custom-particle">
                    <img class="file-thumb" id="thumb-custom-particle">
                    <span class="file-name">üìÇ –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª...</span>
                    <span class="size-badge" id="sz-custom-particle"></span>
                    <button class="file-clear" onclick="clearFile('custom-particle', event)">‚úï</button>
                </div>
                <input type="file" id="img-custom-particle" accept="image/*" onchange="loadImage('custom-particle', this)">
            </div>
            <label>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</label>
            <select id="particle-direction">
                <option value="down">‚¨áÔ∏è –í–Ω–∏–∑</option>
                <option value="up">‚¨ÜÔ∏è –í–≤–µ—Ä—Ö</option>
                <option value="left">‚¨ÖÔ∏è –í–ª–µ–≤–æ</option>
                <option value="right">‚û°Ô∏è –í–ø—Ä–∞–≤–æ</option>
                <option value="random">üîÄ –°–ª—É—á–∞–π–Ω–æ</option>
                <option value="explode">üí• –í–∑—Ä—ã–≤</option>
                <option value="spiral">üåÄ –°–ø–∏—Ä–∞–ª—å</option>
            </select>
        </div>

        <label>–†–∞–∑–º–µ—Ä —á–∞—Å—Ç–∏—Ü (%)</label>
        <div class="slider-container">
            <input type="range" id="global-particle-size" min="30" max="200" value="100" oninput="sliderVal(this,'gps-val')">
            <span class="slider-value" id="gps-val">100</span>
        </div>
        <label>–°–∫–æ—Ä–æ—Å—Ç—å —á–∞—Å—Ç–∏—Ü (%)</label>
        <div class="slider-container">
            <input type="range" id="global-particle-speed" min="20" max="300" value="100" oninput="sliderVal(this,'gpsp-val')">
            <span class="slider-value" id="gpsp-val">100</span>
        </div>
        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å—Ç–∏—Ü (%)</label>
        <div class="slider-container">
            <input type="range" id="global-particle-count" min="10" max="300" value="100" oninput="sliderVal(this,'gpc-val')">
            <span class="slider-value" id="gpc-val">100</span>
        </div>
    </div>

    <!-- 5. –ê–£–î–ò–û -->
    <div class="group">
        <div class="group-title">5. –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã</div>
        <p class="hint" style="margin-bottom:8px;">‚ö†Ô∏è –ê—É–¥–∏–æ —Å–∏–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–µ MP3 (1‚Äì3 —Å–µ–∫).</p>
        <div class="audio-grid">
            <div class="audio-item">
                <span class="audio-label">üé¨ –°—Ç–∞—Ä—Ç</span>
                <div class="file-upload-wrap" style="margin:0">
                    <div class="file-upload-btn" id="btn-snd-start" style="padding:5px 10px;">
                        <span class="file-name" style="font-size:11px;">üìÇ —Ñ–∞–π–ª...</span>
                        <span class="size-badge" id="sz-snd-start"></span>
                        <button class="file-clear" onclick="clearFile('snd-start', event)">‚úï</button>
                    </div>
                    <input type="file" id="audio-start" accept="audio/*" onchange="loadAudio('snd-start', this)">
                </div>
            </div>
            <div class="audio-item">
                <span class="audio-label">üê∏ –ü—Ä—ã–∂–æ–∫</span>
                <div class="file-upload-wrap" style="margin:0">
                    <div class="file-upload-btn" id="btn-snd-jump" style="padding:5px 10px;">
                        <span class="file-name" style="font-size:11px;">üìÇ —Ñ–∞–π–ª...</span>
                        <span class="size-badge" id="sz-snd-jump"></span>
                        <button class="file-clear" onclick="clearFile('snd-jump', event)">‚úï</button>
                    </div>
                    <input type="file" id="audio-jump" accept="audio/*" onchange="loadAudio('snd-jump', this)">
                </div>
            </div>
            <div class="audio-item">
                <span class="audio-label">‚ö° –û—à–∏–±–∫–∞</span>
                <div class="file-upload-wrap" style="margin:0">
                    <div class="file-upload-btn" id="btn-snd-shock" style="padding:5px 10px;">
                        <span class="file-name" style="font-size:11px;">üìÇ —Ñ–∞–π–ª...</span>
                        <span class="size-badge" id="sz-snd-shock"></span>
                        <button class="file-clear" onclick="clearFile('snd-shock', event)">‚úï</button>
                    </div>
                    <input type="file" id="audio-shock" accept="audio/*" onchange="loadAudio('snd-shock', this)">
                </div>
            </div>
            <div class="audio-item">
                <span class="audio-label">üíÄ –ü—Ä–æ–∏–≥—Ä—ã—à</span>
                <div class="file-upload-wrap" style="margin:0">
                    <div class="file-upload-btn" id="btn-snd-lose" style="padding:5px 10px;">
                        <span class="file-name" style="font-size:11px;">üìÇ —Ñ–∞–π–ª...</span>
                        <span class="size-badge" id="sz-snd-lose"></span>
                        <button class="file-clear" onclick="clearFile('snd-lose', event)">‚úï</button>
                    </div>
                    <input type="file" id="audio-lose" accept="audio/*" onchange="loadAudio('snd-lose', this)">
                </div>
            </div>
            <div class="audio-item">
                <span class="audio-label">üèÜ –ü–æ–±–µ–¥–∞</span>
                <div class="file-upload-wrap" style="margin:0">
                    <div class="file-upload-btn" id="btn-snd-win" style="padding:5px 10px;">
                        <span class="file-name" style="font-size:11px;">üìÇ —Ñ–∞–π–ª...</span>
                        <span class="size-badge" id="sz-snd-win"></span>
                        <button class="file-clear" onclick="clearFile('snd-win', event)">‚úï</button>
                    </div>
                    <input type="file" id="audio-win" accept="audio/*" onchange="loadAudio('snd-win', this)">
                </div>
            </div>
            <div class="audio-item">
                <span class="audio-label">‚¨ÜÔ∏è –£—Ä–æ–≤–µ–Ω—å</span>
                <div class="file-upload-wrap" style="margin:0">
                    <div class="file-upload-btn" id="btn-snd-level" style="padding:5px 10px;">
                        <span class="file-name" style="font-size:11px;">üìÇ —Ñ–∞–π–ª...</span>
                        <span class="size-badge" id="sz-snd-level"></span>
                        <button class="file-clear" onclick="clearFile('snd-level', event)">‚úï</button>
                    </div>
                    <input type="file" id="audio-level" accept="audio/*" onchange="loadAudio('snd-level', this)">
                </div>
            </div>
            <div class="audio-item">
                <span class="audio-label">üî¢ –û—Ç—Å—á—ë—Ç</span>
                <div class="file-upload-wrap" style="margin:0">
                    <div class="file-upload-btn" id="btn-snd-countdown" style="padding:5px 10px;">
                        <span class="file-name" style="font-size:11px;">üìÇ —Ñ–∞–π–ª...</span>
                        <span class="size-badge" id="sz-snd-countdown"></span>
                        <button class="file-clear" onclick="clearFile('snd-countdown', event)">‚úï</button>
                    </div>
                    <input type="file" id="audio-countdown" accept="audio/*" onchange="loadAudio('snd-countdown', this)">
                </div>
            </div>
        </div>
    </div>

    <!-- 6. –í–û–ü–†–û–°–´ -->
    <div class="group">
        <div class="group-title">6. –£—Ä–æ–≤–Ω–∏ –∏ –≤–æ–ø—Ä–æ—Å—ã</div>

        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Ä–æ–≤–Ω–µ–π</label>
        <div class="slider-container">
            <input type="range" id="levels-count" min="1" max="5" value="3" oninput="onLevelsChange(this.value)">
            <span class="slider-value" id="levels-value">3</span>
        </div>

        <div class="levels-grid" id="levels-tabs"></div>

        <div style="background:var(--panel); padding:12px; border-radius:8px; margin:10px 0; border:1px solid var(--border);">
            <label style="margin-top:0; color:var(--accent);">üìù –í–≤–æ–¥ –≤–æ–ø—Ä–æ—Å–æ–≤ (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ —Å—Ç—Ä–æ–∫—É)</label>
            <p class="hint" style="margin-bottom:8px;">
                <strong>–§–æ—Ä–º–∞—Ç:</strong> –≤–æ–ø—Ä–æ—Å | –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π | –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π1 | –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π2<br>
                <strong>–ü—Ä–∏–º–µ—Ä:</strong> She ___ a book|reads|read|reading
            </p>
            <textarea id="questions-input" rows="8" placeholder="She ___ a book|reads|read|reading
I ___ to school|went|go|goes
They ___ happy|were|was|are"></textarea>
            <button class="btn btn-purple" style="margin-top:8px;" onclick="parseQuestions()">‚úì –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã</button>
        </div>

        <div id="questions-preview"></div>
    </div>

    <!-- –î–ï–ô–°–¢–í–ò–Ø -->
    <button class="btn btn-green" onclick="updatePreview()">‚ñ∂ –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</button>
    <button class="btn btn-blue" onclick="copyForGenially()">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è Genially</button>
    <button class="btn btn-purple" style="margin-bottom:8px;" onclick="downloadGame()">üíæ –°–∫–∞—á–∞—Ç—å HTML (–ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è)</button>
</div>

<!-- PREVIEW -->
<div id="preview-area">
    <div id="preview-header">
        <h3>üì∫ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h3>
        <span id="size-display" class="size-info size-ok">‚Äî</span>
    </div>
    <iframe id="preview-frame"></iframe>
    <div id="status-bar">
        <span id="status-text">–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</span>
    </div>
</div>

<script>
// =====================================================
// –ì–õ–û–ë–ê–õ–¨–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï
// =====================================================
var currentLevel = 1;
var gameData = { levels: {} };
var previewTimer = null;

// –•—Ä–∞–Ω–∏–ª–∏—â–µ –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–≤ (–¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è) –∏ —Å–∂–∞—Ç—ã—Ö (–¥–ª—è Genially)
var assets = {}; // { key: { original: base64, compressed: base64, size: bytes, compSize: bytes } }

// =====================================================
// INIT
// =====================================================
window.onload = function() {
    updateLevelsTabs(3);
    switchLevel(1);
    setupAutoPreview();
    setTimeout(updatePreview, 300);
};

// =====================================================
// –°–õ–ê–ô–î–ï–†–´
// =====================================================
function sliderVal(el, valId) {
    document.getElementById(valId).textContent = el.value;
    // –ï—Å–ª–∏ —ç—Ç–æ —Å–ª–∞–π–¥–µ—Ä—ã —Å–∂–∞—Ç–∏—è ‚Äî –ø–µ—Ä–µ—Å–∂–∏–º–∞–µ–º –≤—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏
    if (el.id === 'img-max-size' || el.id === 'img-quality') {
        recompressAllImages();
    }
    schedulePreview();
}

// –ü–µ—Ä–µ—Å–∂–∞—Ç—å –≤—Å–µ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
function recompressAllImages() {
    var imageKeys = ['hero', 'platform', 'bg', 'life', 'victory-hero', 'custom-particle'];
    imageKeys.forEach(function(key) {
        if (assets[key] && assets[key].original) {
            compressImage(assets[key].original, function(compressedData) {
                assets[key].compressed = compressedData;
                assets[key].compSize = compressedData.length;
                updateFileUI(key, compressedData, assets[key].name);
            });
        }
    });
    setTimeout(updateSizeDisplay, 200);
}

// =====================================================
// –¶–í–ï–¢–ê
// =====================================================
function syncHex(colorEl, hexId) {
    document.getElementById(hexId).value = colorEl.value;
    schedulePreview();
}
function syncColor(hexEl, colorId) {
    if (/^#[0-9A-Fa-f]{6}$/.test(hexEl.value)) {
        document.getElementById(colorId).value = hexEl.value;
        schedulePreview();
    }
}

// =====================================================
// –ó–ê–ì–†–£–ó–ö–ê –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô –°–û –°–ñ–ê–¢–ò–ï–ú
// =====================================================
function loadImage(key, input) {
    var file = input.files[0];
    if (!file) return;

    var reader = new FileReader();
    reader.onload = function(e) {
        var originalData = e.target.result;

        // –°–∂–∏–º–∞–µ–º
        compressImage(originalData, function(compressedData) {
            assets[key] = {
                original: originalData,
                compressed: compressedData,
                origSize: originalData.length,
                compSize: compressedData.length,
                name: file.name
            };

            updateFileUI(key, compressedData, file.name);
            updateSizeDisplay();
            schedulePreview();
        });
    };
    reader.readAsDataURL(file);
}

function compressImage(dataUrl, callback) {
    var maxSize = parseInt(document.getElementById('img-max-size').value) || 300;
    var quality = (parseInt(document.getElementById('img-quality').value) || 70) / 100;

    var img = new Image();
    img.onload = function() {
        var canvas = document.createElement('canvas');
        var w = img.width, h = img.height;
        var scale = Math.min(1, maxSize / Math.max(w, h));
        canvas.width = Math.round(w * scale);
        canvas.height = Math.round(h * scale);

        var ctx = canvas.getContext('2d');

        // –ï—Å–ª–∏ PNG —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
        var isPng = dataUrl.startsWith('data:image/png');
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

        if (isPng) {
            // PNG ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–æ—Ä–º–∞—Ç (–Ω–µ —Ç–µ—Ä—è–µ–º –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å)
            callback(canvas.toDataURL('image/png'));
        } else {
            callback(canvas.toDataURL('image/jpeg', quality));
        }
    };
    img.src = dataUrl;
}

function updateFileUI(key, dataUrl, name) {
    var btn = document.getElementById('btn-' + key);
    var thumb = document.getElementById('thumb-' + key);
    var szBadge = document.getElementById('sz-' + key);

    if (!btn) return;

    btn.classList.add('has-file');
    var nameEl = btn.querySelector('.file-name');
    if (nameEl) nameEl.textContent = name || '—Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω';

    if (thumb) {
        thumb.src = dataUrl;
    }

    if (szBadge && assets[key]) {
        var kb = Math.round(assets[key].compSize / 1024);
        var origKb = Math.round(assets[key].origSize / 1024);
        szBadge.textContent = kb + 'KB';
        if (kb > 100) szBadge.className = 'size-badge danger';
        else if (kb > 50) szBadge.className = 'size-badge warn';
        else szBadge.className = 'size-badge';

        if (origKb > kb) {
            szBadge.title = '–ò—Å—Ö–æ–¥–Ω—ã–π: ' + origKb + 'KB ‚Üí –°–∂–∞—Ç—ã–π: ' + kb + 'KB';
        }
    }
}

function clearFile(key, event) {
    event.preventDefault();
    event.stopPropagation();

    delete assets[key];

    var btn = document.getElementById('btn-' + key);
    var thumb = document.getElementById('thumb-' + key);
    var szBadge = document.getElementById('sz-' + key);

    if (btn) {
        btn.classList.remove('has-file');
        var nameEl = btn.querySelector('.file-name');
        if (nameEl) nameEl.textContent = 'üìÇ –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª...';
    }
    if (thumb) { thumb.src = ''; }
    if (szBadge) { szBadge.textContent = ''; szBadge.className = 'size-badge'; }

    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º file input
    var inputMap = {
        'hero': 'img-hero', 'platform': 'img-platform', 'bg': 'img-bg',
        'life': 'img-life', 'victory-hero': 'img-victory-hero',
        'custom-particle': 'img-custom-particle'
    };
    if (inputMap[key]) {
        var inp = document.getElementById(inputMap[key]);
        if (inp) inp.value = '';
    }

    updateSizeDisplay();
    schedulePreview();
}

// =====================================================
// –ó–ê–ì–†–£–ó–ö–ê –ê–£–î–ò–û
// =====================================================
function loadAudio(key, input) {
    var file = input.files[0];
    if (!file) return;

    var reader = new FileReader();
    reader.onload = function(e) {
        var data = e.target.result;
        assets[key] = {
            original: data,
            compressed: data, // –∞—É–¥–∏–æ –Ω–µ —Å–∂–∏–º–∞–µ–º, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞–∫ –µ—Å—Ç—å
            origSize: data.length,
            compSize: data.length,
            name: file.name
        };

        var btn = document.getElementById('btn-' + key);
        var szBadge = document.getElementById('sz-' + key);
        var nameEl = btn ? btn.querySelector('.file-name') : null;

        if (btn) btn.classList.add('has-file');
        if (nameEl) nameEl.textContent = file.name;
        if (szBadge) {
            var kb = Math.round(data.length / 1024);
            szBadge.textContent = kb + 'KB';
            if (kb > 300) szBadge.className = 'size-badge danger';
            else if (kb > 100) szBadge.className = 'size-badge warn';
            else szBadge.className = 'size-badge';
        }

        updateSizeDisplay();
        schedulePreview();
    };
    reader.readAsDataURL(file);
}

// =====================================================
// –†–ê–ó–ú–ï–†
// =====================================================
function updateSizeDisplay() {
    var total = 0;
    Object.keys(assets).forEach(function(k) {
        total += assets[k].compSize || 0;
    });

    var kb = Math.round(total / 1024);
    var label = kb > 1024 ? (kb/1024).toFixed(1) + ' MB' : kb + ' KB';

    var el = document.getElementById('total-size-val');
    if (el) {
        el.textContent = label;
        if (kb > 500) el.style.color = '#f87171';
        else if (kb > 200) el.style.color = '#f59e0b';
        else el.style.color = '#22d3ee';
    }

    var disp = document.getElementById('size-display');
    if (disp) {
        disp.textContent = '–ê—Å—Å–µ—Ç—ã: ' + label;
        if (kb > 500) disp.className = 'size-info size-bad';
        else if (kb > 200) disp.className = 'size-info size-warn';
        else disp.className = 'size-info size-ok';
    }
}

// =====================================================
// –≠–§–§–ï–ö–¢–´
// =====================================================
function toggleCustomEffect() {
    var v = document.getElementById('victory-effect').value;
    document.getElementById('custom-effect-settings').style.display = v === 'custom' ? 'block' : 'none';
}

// =====================================================
// LEVELS
// =====================================================
function onLevelsChange(val) {
    document.getElementById('levels-value').textContent = val;
    updateLevelsTabs(parseInt(val));
    schedulePreview();
}

function updateLevelsTabs(count) {
    var container = document.getElementById('levels-tabs');
    container.innerHTML = '';
    for (var i = 1; i <= count; i++) {
        if (!gameData.levels[i]) gameData.levels[i] = [];
        var tab = document.createElement('div');
        tab.className = 'level-tab' + (i === currentLevel ? ' active' : '');
        tab.textContent = '–£—Ä–æ–≤–µ–Ω—å ' + i;
        (function(lvl) { tab.onclick = function() { switchLevel(lvl); }; })(i);
        container.appendChild(tab);
    }
    // –£–¥–∞–ª—è–µ–º –ª–∏—à–Ω–∏–µ —É—Ä–æ–≤–Ω–∏
    Object.keys(gameData.levels).forEach(function(k) {
        if (parseInt(k) > count) delete gameData.levels[k];
    });
}

function switchLevel(level) {
    currentLevel = level;
    document.querySelectorAll('.level-tab').forEach(function(t, idx) {
        t.classList.toggle('active', idx + 1 === level);
    });
    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º textarea
    var qs = gameData.levels[currentLevel] || [];
    document.getElementById('questions-input').value = qs.map(function(q) {
        var wrong = q.options.filter(function(_, i) { return i !== q.correct; });
        return q.question + '|' + q.options[q.correct] + '|' + wrong.join('|');
    }).join('\n');
    updateQuestionsPreview();
}

// =====================================================
// –í–û–ü–†–û–°–´
// =====================================================
function parseQuestions() {
    var lines = document.getElementById('questions-input').value
        .split('\n')
        .filter(function(l) { return l.trim() && l.includes('|'); });

    gameData.levels[currentLevel] = lines.map(function(line) {
        var parts = line.split('|').map(function(p) { return p.trim(); }).filter(Boolean);
        if (parts.length < 3) return null;
        var question = parts[0];
        var correct = parts[1];
        var wrong = parts.slice(2, 4);
        while (wrong.length < 2) wrong.push('???');
        return { question: question, options: [correct, wrong[0], wrong[1]], correct: 0 };
    }).filter(Boolean);

    updateQuestionsPreview();
    schedulePreview();
}

function updateQuestionsPreview() {
    var qs = gameData.levels[currentLevel] || [];
    var container = document.getElementById('questions-preview');
    if (qs.length === 0) {
        container.innerHTML = '<p class="hint">–ù–µ—Ç –≤–æ–ø—Ä–æ—Å–æ–≤. –í–≤–µ–¥–∏—Ç–µ –∏—Ö –≤—ã—à–µ –∏ –Ω–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å".</p>';
        return;
    }
    container.innerHTML = '<div style="background:var(--panel);padding:10px;border-radius:8px;border:1px solid var(--border);font-size:12px;color:var(--accent);">‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ: ' + qs.length + ' –≤–æ–ø—Ä–æ—Å–æ–≤<br><span style="color:#64748b;font-size:10px;">–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 6 —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–∞ —Ä–∞—É–Ω–¥. –û—Ç–≤–µ—Ç—ã –ø–µ—Ä–µ–º–µ—à–∏–≤–∞—é—Ç—Å—è.</span></div>';
}

// =====================================================
// AUTO PREVIEW
// =====================================================
function setupAutoPreview() {
    document.querySelectorAll('#sidebar input:not([type="file"]), #sidebar select, #sidebar textarea').forEach(function(el) {
        el.addEventListener('change', schedulePreview);
        if (el.type === 'range' || el.tagName === 'SELECT' || el.tagName === 'TEXTAREA') {
            el.addEventListener('input', schedulePreview);
        }
    });
}

function schedulePreview() {
    clearTimeout(previewTimer);
    previewTimer = setTimeout(updatePreview, 800);
    setStatus('‚è≥ –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è...');
}

function setStatus(msg) {
    var el = document.getElementById('status-text');
    if (el) el.textContent = msg;
}

function updatePreview() {
    try {
        var html = buildGameHTML(false);
        var iframe = document.getElementById('preview-frame');
        var blob = new Blob([html], { type: 'text/html' });
        var oldUrl = iframe.src;
        iframe.src = URL.createObjectURL(blob);
        if (oldUrl && oldUrl.startsWith('blob:')) URL.revokeObjectURL(oldUrl);
        setStatus('‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω ‚Äî ' + new Date().toLocaleTimeString());
    } catch(e) {
        setStatus('‚ùå –û—à–∏–±–∫–∞: ' + e.message);
    }
}

// =====================================================
// HELPERS
// =====================================================
function gv(id, def) {
    var el = document.getElementById(id);
    return el ? (el.value || def || '') : (def || '');
}
function gb(id, def) {
    var el = document.getElementById(id);
    return el ? el.checked : (def !== undefined ? def : false);
}
function getAsset(key, forDownload) {
    if (!assets[key]) return '';
    return forDownload ? assets[key].original : assets[key].compressed;
}

// =====================================================
// BUILD GAME HTML
// =====================================================
function buildGameHTML(forDownload) {
    var title         = gv('game-title', 'GAME');
    var welcomeText   = gv('welcome-text', '–ì–æ—Ç–æ–≤—ã?');
    var startBtnText  = gv('start-button-text', '–°–¢–ê–†–¢!');
    var retryBtnText  = gv('retry-button-text', '–ï—â—ë —Ä–∞–∑');
    var victoryText   = gv('victory-text', '–ü–û–ë–ï–î–ê! üéâ');
    var victoryMsg    = gv('victory-message', '–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!');
    var gameoverText  = gv('gameover-text', '–ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê üò¢');
    var lang          = gv('game-language', 'ru');
    var enableTimer   = gb('enable-timer', true);
    var enableCd      = gb('enable-countdown', true);
    var lives         = gv('lives-count', '5');
    var timerDur      = gv('timer-duration', '15');
    var ansFont       = gv('answer-font-size', '22');
    var heroSize      = gv('hero-size', '100');
    var heroV         = gv('hero-vertical', '70');
    var colBorder     = gv('color-question-border', '#6ab04c');
    var colGlow       = gv('color-glow', '#ffffff');
    var colTimer      = gv('color-timer', '#eb4d4b');
    var colText       = gv('color-text', '#ffffff');
    var victEff       = gv('victory-effect', 'fireworks');
    var pDir          = gv('particle-direction', 'down');
    var gpSize        = gv('global-particle-size', '100');
    var gpSpeed       = gv('global-particle-speed', '100');
    var gpCount       = gv('global-particle-count', '100');

    var imgHero       = getAsset('hero', forDownload);
    var imgPlatform   = getAsset('platform', forDownload);
    var imgBg         = getAsset('bg', forDownload);
    var imgLife       = getAsset('life', forDownload);
    var imgVictHero   = getAsset('victory-hero', forDownload);
    var imgCustP      = getAsset('custom-particle', forDownload);

    var sndStart      = getAsset('snd-start', forDownload);
    var sndJump       = getAsset('snd-jump', forDownload);
    var sndShock      = getAsset('snd-shock', forDownload);
    var sndLose       = getAsset('snd-lose', forDownload);
    var sndWin        = getAsset('snd-win', forDownload);
    var sndLevel      = getAsset('snd-level', forDownload);
    var sndCountdown  = getAsset('snd-countdown', forDownload);

    var levelsBank = {};
    Object.keys(gameData.levels).forEach(function(lvl) {
        levelsBank[lvl] = gameData.levels[lvl].map(function(q) {
            return { q: q.question, options: q.options, correct: q.correct };
        });
    });

    var esc = function(s) {
        return (s||'').replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\n/g,'\\n').replace(/\r/g,'');
    };
    var escHtml = function(s) {
        return (s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
    };

    var countdownHTML = enableCd ? '<div id="countdown-overlay" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.4);z-index:3000;justify-content:center;align-items:center;"><div id="countdown-text" style="font-size:140px;color:' + colText + ';font-weight:900;text-shadow:0 0 30px rgba(0,0,0,.6);font-family:Arial;"></div></div>' : '';

    var initCode = enableCd ? (
        'var cov=document.getElementById("countdown-overlay");'+
        'var ctxt=document.getElementById("countdown-text");'+
        'document.getElementById("overlay").style.display="none";'+
        'Object.values(sounds).forEach(function(s){if(s){try{s.pause();s.currentTime=0;}catch(e){}}});'+
        'currentLevel=1;step=0;lives='+lives+';updateLives();createPond();'+
        'cov.style.display="flex";'+
        'var csteps=["3","2","1",t.go];var ci=0;'+
        'if(window._cdTimer)clearTimeout(window._cdTimer);'+
        'if(sounds.count){sounds.count.currentTime=0;sounds.count.volume=gvol;sounds.count.play().catch(function(){});}'+
        'function _showCd(){'+
        'if(ci<csteps.length){'+
        'ctxt.textContent=csteps[ci];'+
        'ctxt.classList.remove("count-anim");void ctxt.offsetWidth;ctxt.classList.add("count-anim");'+
        'ci++;'+
        'window._cdTimer=setTimeout(_showCd,1000);'+
        '}else{'+
        'if(sounds.count){sounds.count.pause();sounds.count.currentTime=0;}'+
        'cov.style.display="none";frog.style.opacity=1;startGameLogic();}}'+
        '_showCd();'
    ) : (
        'currentLevel=1;step=0;lives='+lives+';updateLives();createPond();'+
        'document.getElementById("overlay").style.display="none";'+
        'frog.style.opacity=1;startGameLogic();'
    );

    return '<!DOCTYPE html>\n<html lang="'+lang+'">\n<head>\n<meta charset="UTF-8">\n<meta name="viewport" content="width=device-width,initial-scale=1.0">\n<title>'+escHtml(title)+'</title>\n<style>\n' +
'*{box-sizing:border-box;margin:0;padding:0}\n' +
':root{--ui:'+colBorder+';--glow:'+colGlow+';--timer:'+colTimer+';--tcol:'+colText+';}\n' +
'html,body{width:100%;height:100%;overflow:hidden;font-family:Arial,sans-serif;' + (imgBg ? 'background:url("'+imgBg+'") no-repeat center/cover;' : 'background:#1a5276;') + '}\n' +
'#start-screen{position:fixed;inset:0;background:rgba(0,0,0,.72);z-index:3000;display:flex;flex-direction:column;justify-content:center;align-items:center;color:var(--tcol);text-align:center;padding:20px;}\n' +
'#start-screen h1{font-size:clamp(2em,5vw,3.5em);margin-bottom:18px;text-shadow:0 0 20px rgba(0,0,0,.9);}\n' +
'#start-screen p{font-size:clamp(1em,2.5vw,1.6em);margin-bottom:28px;text-shadow:0 0 10px rgba(0,0,0,.8);}\n' +
'#start-btn{padding:18px 56px;font-size:22px;font-weight:bold;background:var(--ui);color:#fff;border:none;border-radius:50px;cursor:pointer;text-transform:uppercase;box-shadow:0 8px 24px rgba(0,0,0,.5);transition:transform .3s,box-shadow .3s;}\n' +
'#start-btn:hover{transform:scale(1.08) translateY(-4px);box-shadow:0 14px 36px rgba(0,0,0,.7);}\n' +
'#ui{position:absolute;top:0;width:100%;z-index:1000;pointer-events:none;}\n' +
'#header{background:var(--ui);color:#fff;padding:9px;text-align:center;font-weight:bold;font-size:clamp(12px,2vw,18px);pointer-events:auto;}\n' +
'#lives-wrap{position:absolute;top:46px;left:16px;display:flex;gap:6px;pointer-events:auto;}\n' +
'.life-icon{width:46px;height:46px;' + (imgLife ? 'background:url("'+imgLife+'") no-repeat center/contain;' : 'font-size:28px;line-height:46px;text-align:center;') + 'filter:drop-shadow(0 3px 5px rgba(0,0,0,.4));}\n' +
(imgLife ? '' : '.life-icon::before{content:"‚ù§Ô∏è"}\n') +
'#qbox{background:#fff;width:88%;max-width:520px;margin:8px auto;padding:12px 14px;border-radius:16px;text-align:center;box-shadow:0 6px 18px rgba(0,0,0,.3);pointer-events:auto;}\n' +
'#q-text{font-size:clamp(13px,2.5vw,17px);color:#2c3e50;font-weight:bold;line-height:1.4;}\n' +
'.tbar{width:100%;height:7px;background:#dfe6e9;border-radius:4px;margin-top:8px;overflow:hidden;' + (enableTimer ? '' : 'display:none;') + '}\n' +
'#tfill{width:100%;height:100%;background:var(--timer);transition:width .1s linear;}\n' +
'#world{position:absolute;inset:0;padding-top:56px;overflow:hidden;}\n' +
'#pond{position:relative;width:100%;height:100%;overflow:hidden;}\n' +
'.leaf{position:absolute;width:20vw;height:16vw;max-width:180px;max-height:150px;' + (imgPlatform ? 'background:url("'+imgPlatform+'") no-repeat center/contain;' : 'background:radial-gradient(circle,#27ae60,#1a7a40);border-radius:50%;') + 'display:flex;align-items:center;justify-content:center;opacity:.85;transform:scale(.85);transition:transform .4s,opacity .4s;padding:14px;text-align:center;font-size:'+ansFont+'px;color:#fff;font-weight:bold;text-shadow:1px 1px 3px rgba(0,0,0,.9),-1px -1px 3px rgba(0,0,0,.9);}\n' +
'.leaf.active{opacity:1;transform:scale(1.1);z-index:10;cursor:pointer;filter:drop-shadow(0 0 14px var(--glow));}\n' +
'.leaf.active::after{content:attr(data-letter);position:absolute;top:-8px;left:50%;transform:translateX(-50%);background:#f1c40f;width:22px;height:22px;border-radius:50%;font-size:12px;display:flex;align-items:center;justify-content:center;font-weight:bold;color:#000;text-shadow:none;}\n' +
'.leaf.active:not([data-letter])::after{display:none;}\n' +
'@keyframes leafBounce{0%{transform:scale(1.1) translateY(0)}30%{transform:scale(1.05) translateY(7px)}60%{transform:scale(1.12) translateY(-3px)}100%{transform:scale(1.1) translateY(0)}}\n' +
'.leaf-landed{animation:leafBounce .5s ease-out;}\n' +
'#frog{opacity:0;position:absolute;width:calc(10vw*'+heroSize+'/100);height:calc(10vw*'+heroSize+'/100);max-width:calc(90px*'+heroSize+'/100);max-height:calc(90px*'+heroSize+'/100);' + (imgHero ? 'background:url("'+imgHero+'") no-repeat center/contain;' : 'font-size:calc(50px*'+heroSize+'/100);line-height:1;text-align:center;') + 'transform:translate(-50%,-'+heroV+'%) scale(1.15);filter:drop-shadow(0 8px 14px rgba(0,0,0,.5));z-index:999!important;transition:left .6s cubic-bezier(.47,1.21,.58,1),top .6s cubic-bezier(.47,1.21,.58,1),transform .3s;pointer-events:none;}\n' +
(imgHero ? '' : '#frog::after{content:"üê∏"}\n') +
'.jumping-frog{filter:drop-shadow(0 28px 18px rgba(0,0,0,.35))!important;transform:translate(-50%,calc(-'+heroV+'% - 20%)) scale(1.4)!important;}\n' +
'@keyframes shock{0%{transform:scale(1.1) translate(2px,2px);filter:brightness(1.6) hue-rotate(180deg)}25%{transform:scale(1.1) translate(-2px,-2px)}50%{transform:scale(1.1) translate(2px,-2px)}75%{transform:scale(1.1) translate(-2px,2px)}100%{transform:scale(1.1) translate(0,0);filter:brightness(1)}}\n' +
'.shock{animation:shock .1s infinite;z-index:10!important;}\n' +
'.splash{position:absolute;border:4px solid rgba(255,255,255,.6);border-radius:50%;transform:translate(-50%,-50%);pointer-events:none;animation:splAni .6s ease-out forwards;z-index:5;}\n' +
'@keyframes splAni{0%{width:0;height:0;opacity:1;border-width:4px}100%{width:150px;height:80px;opacity:0;border-width:1px}}\n' +
'#overlay{position:fixed;inset:0;background:transparent;z-index:2000;display:none;flex-direction:column;justify-content:center;align-items:center;}\n' +
'.vmodal{background:rgba(255,255,255,.95);padding:36px;border-radius:20px;text-align:center;max-width:480px;box-shadow:0 20px 60px rgba(0,0,0,.5);}\n' +
'.vmodal img{max-width:180px;max-height:180px;display:block;margin:0 auto 16px;}\n' +
'.vmodal h1{color:#22c55e;font-size:2.2em;margin:0 0 12px;}\n' +
'.vmodal p{color:#334;font-size:1.1em;margin:0 0 22px;line-height:1.5;}\n' +
'.vmodal button{padding:14px 40px;font-size:17px;background:var(--ui);color:#fff;border:none;border-radius:10px;cursor:pointer;font-weight:bold;}\n' +
'#gameover-screen{text-align:center;color:var(--tcol);text-shadow:2px 2px 4px rgba(0,0,0,.7);}\n' +
'#gameover-screen h1{font-size:clamp(2em,5vw,3.5em);animation:bounceIn 1s ease-out;margin-bottom:20px;}\n' +
'#gameover-screen button{padding:14px 42px;border-radius:28px;border:none;background:var(--ui);color:#fff;font-size:18px;cursor:pointer;font-weight:bold;}\n' +
'@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}20%{transform:scale(1.1)}40%{transform:scale(.9)}60%{opacity:1;transform:scale(1.03)}80%{transform:scale(.97)}100%{opacity:1;transform:scale(1)}}\n' +
'@keyframes pondSlide{0%{transform:translateY(0);opacity:1}50%{transform:translateY(100vh);opacity:0}51%{transform:translateY(-100vh);opacity:0}100%{transform:translateY(0);opacity:1}}\n' +
'.pond-transition{animation:pondSlide 1.2s ease-in-out;}\n' +
'#fxCanvas{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2001;pointer-events:none;}\n' +
'#vol-ctrl{position:absolute;top:46px;right:14px;background:rgba(255,255,255,.92);padding:7px 13px;border-radius:22px;display:flex;align-items:center;gap:8px;z-index:2000;pointer-events:auto;box-shadow:0 3px 12px rgba(0,0,0,.2);border:2px solid var(--ui);}\n' +
'#vol-slider{cursor:pointer;accent-color:var(--ui);width:72px;}\n' +
'@keyframes countPulse{0%{transform:scale(.4);opacity:0}50%{transform:scale(1.3);opacity:1}100%{transform:scale(1);opacity:0}}\n' +
'.count-anim{animation:countPulse .9s ease-out forwards;}\n' +
'#brand-logo{position:fixed;bottom:52px;right:12px;width:70px;height:auto;opacity:0.85;z-index:1500;pointer-events:none;filter:drop-shadow(0 2px 6px rgba(0,0,0,.5));transition:opacity .3s;}\n' +
'#brand-logo:hover{opacity:1;}\n' +
'#copyright{position:fixed;bottom:0;left:0;width:100%;background:rgba(0,0,0,.55);color:rgba(255,255,255,.75);font-size:10px;text-align:center;padding:4px 8px;z-index:1500;pointer-events:none;letter-spacing:.3px;font-family:Arial,sans-serif;}\n' +
'</style>\n</head>\n<body>\n\n' +

'<div id="start-screen">\n' +
'<h1>'+escHtml(title)+'</h1>\n' +
'<p>'+escHtml(welcomeText)+'</p>\n' +
'<button id="start-btn" onclick="hideStart()">'+escHtml(startBtnText)+'</button>\n' +
'</div>\n\n' +

countdownHTML + '\n\n' +

'<div id="ui">\n' +
'<div id="header">'+escHtml(title)+'</div>\n' +
'<div id="lives-wrap"></div>\n' +
'<div id="qbox"><div id="q-text"><b>'+escHtml(welcomeText)+'</b></div><div class="tbar"><div id="tfill"></div></div></div>\n' +
'</div>\n\n' +

'<div id="vol-ctrl"><span id="vol-icon">üîä</span><input type="range" id="vol-slider" min="0" max="1" step="0.1" value="0.5"></div>\n\n' +
'<img id="brand-logo" src="data:image/png;base64,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" alt="Vera\'s Interactive English Zone">\n' +
'<div id="copyright">¬© 2026 Vera\'s Interactive English Zone. All rights reserved. Unauthorized copying, modification or distribution is prohibited.</div>\n\n' +

'<div id="world"><div id="pond"><div id="frog"></div></div></div>\n\n' +

'<div id="overlay">\n' +
'<div class="vmodal" id="victory-modal" style="display:none;">\n' +
(imgVictHero ? '<img src="'+imgVictHero+'" alt="">\n' : '') +
'<h1 id="v-title"></h1>\n' +
'<p id="v-msg"></p>\n' +
'<button onclick="initGame()">'+escHtml(retryBtnText)+'</button>\n' +
'</div>\n' +
'<div id="gameover-screen" style="display:none;">\n' +
'<h1 id="go-text"></h1>\n' +
'<button onclick="initGame()">'+escHtml(retryBtnText)+'</button>\n' +
'</div>\n' +
'<canvas id="fxCanvas"></canvas>\n' +
'</div>\n\n' +

'<script>\n' +
'var LB='+JSON.stringify(levelsBank)+';\n' +
'var TDUR='+timerDur+';\n' +
'var ETIMER='+enableTimer+';\n' +
'var VTXT='+JSON.stringify(victoryText)+';\n' +
'var VMSG='+JSON.stringify(victoryMsg)+';\n' +
'var GOTXT='+JSON.stringify(gameoverText)+';\n' +
'var VEFF='+JSON.stringify(victEff)+';\n' +
'var PDIR='+JSON.stringify(pDir)+';\n' +
'var CPIMG='+JSON.stringify(imgCustP)+';\n' +
'var GPS='+gpSize+'/100;\n' +
'var GPSP='+gpSpeed+'/100;\n' +
'var GPC='+gpCount+'/100;\n' +

'var TR={ru:{level:"–£–†–û–í–ï–ù–¨",question:"–í–æ–ø—Ä–æ—Å",outOfTime:"–í—Ä–µ–º—è –≤—ã—à–ª–æ!",go:"–í–ü–ï–†–Å–î!"},en:{level:"LEVEL",question:"Question",outOfTime:"Out of time!",go:"GO!"},de:{level:"STUFE",question:"Frage",outOfTime:"Zeit ab!",go:"LOS!"}};\n' +
'var t=TR["'+lang+'"];\n' +
'var currentLevel=1,step=0,lives='+lives+',questions=[],timer=null,lastLeaf=null,gvol=0.5,jumping=false;\n' +

'function mkAudio(src){if(!src)return null;try{return new Audio(src);}catch(e){return null;}}\n' +
'var sounds={start:mkAudio('+JSON.stringify(sndStart)+'),jump:mkAudio('+JSON.stringify(sndJump)+'),shock:mkAudio('+JSON.stringify(sndShock)+'),lose:mkAudio('+JSON.stringify(sndLose)+'),win:mkAudio('+JSON.stringify(sndWin)+'),level:mkAudio('+JSON.stringify(sndLevel)+'),count:mkAudio('+JSON.stringify(sndCountdown)+')};\n' +
'function playSound(s){if(!s)return;try{s.currentTime=0;s.volume=gvol;s.play();}catch(e){}}\n' +

'document.getElementById("vol-slider").addEventListener("input",function(e){gvol=parseFloat(e.target.value);document.getElementById("vol-icon").textContent=gvol===0?"üîá":"üîä";});\n' +

'var pond=document.getElementById("pond"),frog=document.getElementById("frog");\n' +
'var fxC=document.getElementById("fxCanvas"),ctx=fxC.getContext("2d");\n' +
'function szC(){fxC.width=innerWidth;fxC.height=innerHeight;}window.addEventListener("resize",szC);szC();\n' +

'function hideStart(){document.getElementById("start-screen").style.display="none";initGame();}\n' +

'function createPond(){pond.querySelectorAll(".leaf").forEach(function(l){l.remove();});var R=7,C=5;for(var r=0;r<R;r++)for(var c=1;c<4;c++){var l=document.createElement("div");l.className="leaf";var cw=100/(C-1),off=(r%2===0)?0:cw/2,lp=50+((c*cw+off)-62.5)*1.2;l.style.left=lp+"%";l.style.top=((r/(R-1))*68+12)+"%";l.id="leaf-"+r+"-"+c;pond.appendChild(l);}}\n' +

'function initGame(){pond.classList.remove("pond-transition");'+initCode+'}\n' +

'function shuffle(a){var b=[].concat(a);for(var i=b.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var x=b[i];b[i]=b[j];b[j]=x;}return b;}\n' +

'function startGameLogic(){\n' +
'playSound(sounds.start);\n' +
'document.getElementById("header").textContent='+JSON.stringify(title)+' + " - " + t.level + " " + currentLevel;\n' +
'var qs=shuffle(LB[currentLevel]||[]).slice(0,6);\n' +
'questions=qs.map(function(q){var opts=shuffle([].concat(q.options));return{q:q.q,options:opts,correct:opts.indexOf(q.options[q.correct])};});\n' +
'frog.classList.remove("sink","super-jump","shock");\n' +
'lastLeaf=document.getElementById("leaf-6-2");\n' +
'document.querySelectorAll(".leaf").forEach(function(l){l.classList.remove("active","leaf-landed","shock");});\n' +
'if(lastLeaf)lastLeaf.classList.add("active");\n' +
'frog.style.transition="none";mvFrog(lastLeaf);\n' +
'setTimeout(function(){frog.style.transition="left .6s cubic-bezier(.47,1.21,.58,1),top .6s cubic-bezier(.47,1.21,.58,1),transform .3s";loadLevel();},50);\n' +
'}\n' +

'function updateLives(){var c=document.getElementById("lives-wrap");c.innerHTML="";for(var i=0;i<lives;i++){var d=document.createElement("div");d.className="life-icon";c.appendChild(d);}}\n' +

'function loadLevel(){\n' +
'jumping=false;\n' +
'if(step>=questions.length){\n' +
'var nxt=currentLevel+1;\n' +
'if(LB[nxt]&&LB[nxt].length>0){\n' +
'frog.classList.add("super-jump");playSound(sounds.level);\n' +
'setTimeout(function(){\n' +
'pond.classList.add("pond-transition");\n' +
'setTimeout(function(){\n' +
'currentLevel++;step=0;\n' +
'var qs2=shuffle(LB[currentLevel]||[]).slice(0,6);\n' +
'questions=qs2.map(function(q){var opts=shuffle([].concat(q.options));return{q:q.q,options:opts,correct:opts.indexOf(q.options[q.correct])};});\n' +
'document.getElementById("header").textContent='+JSON.stringify(title)+' + " - " + t.level + " " + currentLevel;\n' +
'frog.classList.remove("super-jump");frog.style.transition="none";\n' +
'lastLeaf=document.getElementById("leaf-6-2");mvFrog(lastLeaf);\n' +
'setTimeout(function(){pond.classList.remove("pond-transition");frog.style.transition="left .6s cubic-bezier(.47,1.21,.58,1),top .6s cubic-bezier(.47,1.21,.58,1),transform .3s";loadLevel();},50);\n' +
'},600);},400);return;\n' +
'}showEnd(VTXT);return;}\n' +

'document.querySelectorAll(".leaf.active").forEach(function(l){l.classList.remove("active","leaf-landed");l.textContent="";l.onclick=null;delete l.dataset.letter;});\n' +
'if(lastLeaf)lastLeaf.classList.add("active");\n' +
'var q=questions[step];\n' +
'document.getElementById("q-text").innerHTML="<b>"+t.question+" "+(step+1)+":</b> "+q.q;\n' +
'var row=5-step;\n' +
'[1,2,3].forEach(function(c,i){var lf=document.getElementById("leaf-"+row+"-"+c);if(lf){lf.classList.add("active");lf.dataset.letter=String.fromCharCode(65+i);lf.textContent=q.options[i];(function(idx,leaf){lf.onclick=function(){hJump(idx,leaf);};})(i,lf);}});\n' +
'if(ETIMER)startTimer();\n' +
'}\n' +

'function hJump(i,leaf){\n' +
'if(jumping)return;jumping=true;clearInterval(timer);mvFrog(leaf);\n' +
'if(i===questions[step].correct){\n' +
'lastLeaf=leaf;leaf.classList.add("leaf-landed");playSound(sounds.jump);\n' +
'setTimeout(function(){var x=leaf.offsetLeft+leaf.offsetWidth/2,y=leaf.offsetTop+leaf.offsetHeight/2;mkSplash(x,y);},300);\n' +
'setTimeout(function(){step++;jumping=false;loadLevel();},700);\n' +
'}else{\n' +
'playSound(sounds.shock);leaf.classList.add("shock");frog.classList.add("shock");\n' +
'lives--;updateLives();\n' +
'setTimeout(function(){\n' +
'mvFrog(lastLeaf);\n' +
'setTimeout(function(){leaf.classList.remove("shock");frog.classList.remove("shock");},300);\n' +
'if(lives<=0)showEnd(GOTXT);\n' +
'else setTimeout(function(){jumping=false;loadLevel();},400);\n' +
'},150);\n' +
'}}\n' +

'function mkSplash(x,y){var s=document.createElement("div");s.className="splash";s.style.left=x+"px";s.style.top=y+"px";pond.appendChild(s);setTimeout(function(){s.remove();},600);}\n' +

'function mvFrog(leaf){if(!leaf||frog.classList.contains("super-jump"))return;frog.style.zIndex="999";frog.classList.add("jumping-frog");frog.style.left=(leaf.offsetLeft+leaf.offsetWidth/2)+"px";frog.style.top=(leaf.offsetTop+leaf.offsetHeight/2)+"px";setTimeout(function(){frog.classList.remove("jumping-frog");},600);}\n' +

'function startTimer(){var pct=100;clearInterval(timer);timer=setInterval(function(){pct-=(100/(TDUR*10));document.getElementById("tfill").style.width=Math.max(0,pct)+"%";if(pct<=0){clearInterval(timer);onTimeout();}},100);}\n' +

'function onTimeout(){playSound(sounds.shock);frog.classList.add("shock");lives--;updateLives();setTimeout(function(){frog.classList.remove("shock");if(lives<=0)showEnd(GOTXT);else{jumping=false;loadLevel();}},800);}\n' +

// PARTICLES ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è
'var parts=[],animId=null;\n' +
'function mkP(type,x,y){\n' +
'var p={x:x||Math.random()*fxC.width,y:y||Math.random()*fxC.height,a:1};\n' +
'if(type==="fire"){var ang=Math.random()*Math.PI*2,sp=(Math.random()*5+2)*GPSP;p.vx=Math.cos(ang)*sp;p.vy=Math.sin(ang)*sp;p.col="hsl("+(Math.random()*360)+",100%,50%)";p.dec=Math.random()*.03+.01;p.t="fire";}\n' +
'else if(type==="conf"){p.x=Math.random()*fxC.width;p.y=-20;p.sz=(Math.random()*10+5)*GPS;p.vx=(Math.random()*4-2)*GPSP;p.vy=(Math.random()*5+3)*GPSP;p.rot=Math.random()*360;p.rs=(Math.random()*10-5)*GPSP;p.col="hsl("+(Math.floor(Math.random()*360))+",100%,50%)";p.dec=0;p.t="conf";}\n' +
'else if(type==="star"){p.x=Math.random()*fxC.width;p.y=-20;p.sz=(Math.random()*8+4)*GPS;p.vy=(Math.random()*3+2)*GPSP;p.tw=Math.random()*Math.PI*2;p.dec=0;p.t="star";}\n' +
'else if(type==="heart"){p.sz=(Math.random()*28+18)*GPS;p.vx=(Math.random()*2-1)*GPSP;p.vy=(Math.random()*-3-1)*GPSP;p.g=.12*GPSP;p.rot=Math.random()*360;p.rs=(Math.random()*4-2)*GPSP;p.a=Math.random()*.4+.3;p.hue=Math.floor(Math.random()*60+300);p.dec=0;p.t="heart";}\n' +
'else if(type==="bubble"){p.x=Math.random()*fxC.width;p.y=fxC.height+20;p.sz=(Math.random()*28+10)*GPS;p.vx=(Math.random()*2-1)*GPSP;p.vy=(Math.random()*2+1)*-GPSP;p.a=Math.random()*.4+.3;p.wb=Math.random()*Math.PI*2;p.dec=0;p.t="bubble";}\n' +
'else if(type==="coin"){p.x=Math.random()*fxC.width;p.y=-20;p.sz=(Math.random()*18+12)*GPS;p.vx=(Math.random()*2-1)*GPSP;p.vy=(Math.random()*4+2)*GPSP;p.flip=0;p.fs=(.05+Math.random()*.03)*GPSP;p.dec=0;p.t="coin";}\n' +
'else if(type==="snow"){p.x=Math.random()*fxC.width;p.y=-20;p.sz=(Math.random()*6+3)*GPS;p.vx=(Math.random()*2-1)*GPSP;p.vy=(Math.random()*2+1)*GPSP;p.rot=Math.random()*360;p.rs=(Math.random()*2-1)*GPSP;p.a=Math.random()*.5+.5;p.dec=0;p.t="snow";}\n' +
'else if(type==="flower"){p.x=Math.random()*fxC.width;p.y=-20;p.sz=(Math.random()*14+8)*GPS;p.vx=(Math.random()*2-1)*GPSP;p.vy=(Math.random()*2+1)*GPSP;p.rot=Math.random()*360;p.rs=(Math.random()*4-2)*GPSP;p.a=Math.random()*.6+.4;p.hue=Math.floor(Math.random()*60+300);p.dec=0;p.t="flower";}\n' +
'else if(type==="custom"){var bs=5*GPSP,dir=PDIR;p.sz=40*GPS;p.rot=Math.random()*360;p.rs=(Math.random()*4-2)*GPSP;p.a=Math.random()*.5+.5;if(dir==="down"){p.x=Math.random()*fxC.width;p.y=-p.sz;p.vx=(Math.random()*2-1)*bs;p.vy=bs;}else if(dir==="up"){p.x=Math.random()*fxC.width;p.y=fxC.height+p.sz;p.vx=(Math.random()*2-1)*bs;p.vy=-bs;}else if(dir==="explode"){p.x=fxC.width/2;p.y=fxC.height/2;var ang2=Math.random()*Math.PI*2;p.vx=Math.cos(ang2)*bs;p.vy=Math.sin(ang2)*bs;}else{p.x=Math.random()*fxC.width;p.y=Math.random()*fxC.height;p.vx=(Math.random()-.5)*bs*2;p.vy=(Math.random()-.5)*bs*2;}p.dec=0;p.t="custom";}\n' +
'return p;}\n' +

'function drawP(p){\n' +
'ctx.save();ctx.globalAlpha=p.a;\n' +
'if(p.t==="fire"){ctx.beginPath();ctx.arc(p.x,p.y,2,0,Math.PI*2);ctx.fillStyle=p.col;ctx.fill();}\n' +
'else if(p.t==="conf"){ctx.translate(p.x,p.y);ctx.rotate(p.rot*Math.PI/180);ctx.fillStyle=p.col;ctx.fillRect(-p.sz/2,-p.sz/2,p.sz,p.sz);}\n' +
'else if(p.t==="star"){ctx.globalAlpha=p.a*(Math.sin(p.tw)*.3+.7);ctx.fillStyle="#FFD700";ctx.beginPath();for(var i=0;i<5;i++){var a=(Math.PI*2*i)/5-Math.PI/2;ctx.lineTo(p.x+Math.cos(a)*p.sz,p.y+Math.sin(a)*p.sz);}ctx.closePath();ctx.fill();}\n' +
'else if(p.t==="heart"){ctx.translate(p.x,p.y);ctx.rotate(p.rot*Math.PI/180);ctx.fillStyle="hsl("+p.hue+",100%,60%)";var s=p.sz;ctx.beginPath();ctx.moveTo(0,s/4);ctx.bezierCurveTo(-s/2,-s/4,-s,s/4,0,s);ctx.bezierCurveTo(s,s/4,s/2,-s/4,0,s/4);ctx.fill();}\n' +
'else if(p.t==="bubble"){var g=ctx.createRadialGradient(p.x-p.sz/4,p.y-p.sz/4,0,p.x,p.y,p.sz);g.addColorStop(0,"rgba(255,255,255,.8)");g.addColorStop(.5,"rgba(173,216,230,.4)");g.addColorStop(1,"rgba(100,149,237,.2)");ctx.fillStyle=g;ctx.beginPath();ctx.arc(p.x,p.y,p.sz,0,Math.PI*2);ctx.fill();}\n' +
'else if(p.t==="coin"){ctx.translate(p.x,p.y);ctx.scale(Math.abs(Math.cos(p.flip)),1);var g2=ctx.createRadialGradient(-p.sz*.3,-p.sz*.3,0,0,0,p.sz);g2.addColorStop(0,"#FFF9C4");g2.addColorStop(.4,"#FFD700");g2.addColorStop(.8,"#FFA500");g2.addColorStop(1,"#B8860B");ctx.fillStyle=g2;ctx.beginPath();ctx.arc(0,0,p.sz,0,Math.PI*2);ctx.fill();ctx.fillStyle="#B8860B";ctx.font="bold "+(p.sz*.9)+"px Arial";ctx.textAlign="center";ctx.textBaseline="middle";ctx.fillText("$",0,0);}\n' +
'else if(p.t==="snow"){ctx.translate(p.x,p.y);ctx.rotate(p.rot*Math.PI/180);ctx.strokeStyle="#FFF";ctx.lineWidth=2;for(var i=0;i<6;i++){ctx.save();ctx.rotate(Math.PI*2*i/6);ctx.beginPath();ctx.moveTo(0,0);ctx.lineTo(0,p.sz);ctx.stroke();ctx.restore();}}\n' +
'else if(p.t==="flower"){ctx.translate(p.x,p.y);ctx.rotate(p.rot*Math.PI/180);ctx.fillStyle="hsl("+p.hue+",100%,70%)";for(var i=0;i<5;i++){ctx.save();ctx.rotate(Math.PI*2*i/5);ctx.beginPath();ctx.ellipse(0,-p.sz*.5,p.sz*.4,p.sz*.6,0,0,Math.PI*2);ctx.fill();ctx.restore();}ctx.fillStyle="#FFD700";ctx.beginPath();ctx.arc(0,0,p.sz*.3,0,Math.PI*2);ctx.fill();}\n' +
'else if(p.t==="custom"&&cpImg&&cpImg.complete){ctx.translate(p.x,p.y);ctx.rotate(p.rot*Math.PI/180);ctx.drawImage(cpImg,-p.sz/2,-p.sz/2,p.sz,p.sz);}\n' +
'ctx.restore();}\n' +

'function updP(p){\n' +
'if(p.t==="fire"){p.vx*=.99;p.vy*=.99;p.vy+=.05;p.x+=p.vx;p.y+=p.vy;p.a-=p.dec;}\n' +
'else if(p.t==="conf"){p.vy+=.2*GPSP;p.x+=p.vx;p.y+=p.vy;p.rot+=p.rs;if(p.y>fxC.height)p.a-=.02;}\n' +
'else if(p.t==="star"){p.y+=p.vy;p.tw+=.1;if(p.y>fxC.height)p.a-=.02;}\n' +
'else if(p.t==="heart"){p.vy+=p.g;p.x+=p.vx;p.y+=p.vy;p.rot+=p.rs;if(p.y>fxC.height+50)p.a-=.01;}\n' +
'else if(p.t==="bubble"){p.wb+=.1;p.x+=p.vx+Math.sin(p.wb)*.5;p.y+=p.vy;if(p.y<-p.sz)p.a-=.02;}\n' +
'else if(p.t==="coin"){p.flip+=p.fs;p.y+=p.vy;p.x+=p.vx;if(p.y>fxC.height)p.a-=.02;}\n' +
'else if(p.t==="snow"){p.y+=p.vy;p.x+=p.vx;p.rot+=p.rs;if(p.y>fxC.height)p.a-=.01;}\n' +
'else if(p.t==="flower"){p.y+=p.vy;p.x+=p.vx;p.rot+=p.rs;if(p.y>fxC.height)p.a-=.01;}\n' +
'else if(p.t==="custom"){p.x+=p.vx;p.y+=p.vy;p.rot+=p.rs;if(p.x<-p.sz||p.x>fxC.width+p.sz||p.y<-p.sz||p.y>fxC.height+p.sz)p.a-=.02;}\n' +
'}\n' +

'var cpImg=null;if(CPIMG){cpImg=new Image();cpImg.src=CPIMG;}\n' +

'function spawnEff(eff){\n' +
'var n=Math.max(1,Math.round(GPC));\n' +
'if(eff==="fireworks"){var hue=Math.floor(Math.random()*360),col="hsl("+hue+",100%,50%)";for(var i=0;i<Math.round(50*n);i++)parts.push(mkP("fire",Math.random()*fxC.width,Math.random()*fxC.height*.7));}\n' +
'else if(eff==="confetti"){for(var i=0;i<Math.round(10*n);i++)parts.push(mkP("conf"));}\n' +
'else if(eff==="stars"){for(var i=0;i<Math.round(5*n);i++)parts.push(mkP("star"));}\n' +
'else if(eff==="hearts"){for(var i=0;i<Math.round(4*n);i++)parts.push(mkP("heart"));}\n' +
'else if(eff==="bubbles"){for(var i=0;i<Math.round(4*n);i++)parts.push(mkP("bubble"));}\n' +
'else if(eff==="gold"||eff==="coins"){for(var i=0;i<Math.round(6*n);i++)parts.push(mkP("coin"));}\n' +
'else if(eff==="snow"){for(var i=0;i<Math.round(6*n);i++)parts.push(mkP("snow"));}\n' +
'else if(eff==="flowers"){for(var i=0;i<Math.round(3*n);i++)parts.push(mkP("flower"));}\n' +
'else if(eff==="custom"){for(var i=0;i<Math.round(6*n);i++)parts.push(mkP("custom"));}\n' +
'}\n' +

'function animLoop(){animId=requestAnimationFrame(animLoop);ctx.clearRect(0,0,fxC.width,fxC.height);parts=parts.filter(function(p){updP(p);drawP(p);return p.a>0;});if(Math.random()<.1)spawnEff(VEFF);}\n' +
'function stopFx(){cancelAnimationFrame(animId);animId=null;parts=[];ctx.clearRect(0,0,fxC.width,fxC.height);}\n' +

'function showEnd(txt){\n' +
'document.getElementById("overlay").style.display="flex";\n' +
'if(txt===VTXT){\n' +
'document.getElementById("victory-modal").style.display="block";\n' +
'document.getElementById("gameover-screen").style.display="none";\n' +
'document.getElementById("v-title").textContent=VTXT;\n' +
'document.getElementById("v-msg").textContent=VMSG;\n' +
'playSound(sounds.win);\n' +
'if(VEFF!=="none"){fxC.style.display="block";animLoop();setTimeout(stopFx,6000);}\n' +
'}else{\n' +
'document.getElementById("victory-modal").style.display="none";\n' +
'document.getElementById("gameover-screen").style.display="block";\n' +
'document.getElementById("go-text").textContent=GOTXT;\n' +
'playSound(sounds.lose);stopFx();fxC.style.display="none";\n' +
'}}\n' +

'<\/script>\n</body>\n</html>';
}

// =====================================================
// COPY FOR GENIALLY
// =====================================================
function copyForGenially() {
    setStatus('‚è≥ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–¥...');

    setTimeout(function() {
        try {
            var html = buildGameHTML(false); // —Å–∂–∞—Ç—ã–µ –∞—Å—Å–µ—Ç—ã
            var sizeKb = Math.round(new Blob([html]).size / 1024);

            if (sizeKb > 800) {
                var ok = confirm(
                    '‚ö†Ô∏è –ö–æ–¥ –≤–µ—Å–∏—Ç ' + sizeKb + ' KB ‚Äî —ç—Ç–æ –º–Ω–æ–≥–æ –¥–ª—è Genially!\n\n' +
                    '–ü—Ä–∏—á–∏–Ω–∞: –±–æ–ª—å—à–∏–µ –∞—É–¥–∏–æ —Ñ–∞–π–ª—ã –∏–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.\n\n' +
                    '–°–æ–≤–µ—Ç—ã:\n‚Ä¢ –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –∫–∞—Ä—Ç–∏–Ω–æ–∫ (—Å–ª–∞–π–¥–µ—Ä "–ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä")\n‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–µ MP3 (1-3 —Å–µ–∫)\n‚Ä¢ –°–Ω–∏–∑—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ JPEG\n\n–í—Å—ë —Ä–∞–≤–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å?'
                );
                if (!ok) { setStatus('–û—Ç–º–µ–Ω–µ–Ω–æ.'); return; }
            }

            var escaped = html
                .replace(/&/g, '&amp;')
                .replace(/'/g, '&apos;')
                .replace(/"/g, '&quot;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;');

            var iframeCode = '<iframe srcdoc="' + escaped + '" width="100%" height="100%" frameborder="0" allowfullscreen style="border:none;width:100%;height:100%;display:block;"></iframe>';

            navigator.clipboard.writeText(iframeCode).then(function() {
                var label = sizeKb > 1024 ? (sizeKb/1024).toFixed(1) + ' MB' : sizeKb + ' KB';
                var icon = sizeKb < 200 ? '‚úÖ' : sizeKb < 500 ? '‚ö†Ô∏è' : 'üî¥';
                alert(icon + ' –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!\n–†–∞–∑–º–µ—Ä: ' + label + '\n\n' +
                    (sizeKb < 200 ? '–û—Ç–ª–∏—á–Ω–æ! –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ Genially –±–µ–∑ –ø—Ä–æ–±–ª–µ–º.' :
                    sizeKb < 500 ? '–°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä. –í–æ–∑–º–æ–∂–Ω–∞ –º–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ Genially.' :
                    '–ë–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–º–µ–Ω—å—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ/—Ä–∞–∑–º–µ—Ä –∫–∞—Ä—Ç–∏–Ω–æ–∫ –∏ –∞—É–¥–∏–æ.'));
                setStatus('‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ (' + label + ')');
            }).catch(function() {
                // Fallback
                var ta = document.createElement('textarea');
                ta.value = iframeCode;
                document.body.appendChild(ta);
                ta.select();
                document.execCommand('copy');
                document.body.removeChild(ta);
                setStatus('‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ (fallback)');
                alert('‚úÖ –ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
            });
        } catch(e) {
            setStatus('‚ùå –û—à–∏–±–∫–∞: ' + e.message);
            alert('–û—à–∏–±–∫–∞: ' + e.message);
        }
    }, 50);
}

// =====================================================
// DOWNLOAD FULL GAME
// =====================================================
function downloadGame() {
    setStatus('‚è≥ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏—é...');
    setTimeout(function() {
        try {
            var html = buildGameHTML(true); // –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∞—Å—Å–µ—Ç—ã
            var blob = new Blob([html], { type: 'text/html' });
            var url = URL.createObjectURL(blob);
            var a = document.createElement('a');
            a.href = url;
            a.download = 'froggy-quest-game.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            setStatus('‚úÖ –§–∞–π–ª —Å–∫–∞—á–∞–Ω');
        } catch(e) {
            setStatus('‚ùå –û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è: ' + e.message);
        }
    }, 50);
}
</script>

</body>
</html>
